<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Agregar al Menú del Día</title>
    <script>
        // Actualiza el precio al cambiar el producto
        function actualizarPrecio() {
            const select = document.getElementById('producto_id');
            const precioInput = document.getElementById('precio');

            // Data de productos con precios (inyectada desde Flask)
            const productos = JSON.parse('{{ productos_json | safe }}');

            const productoSeleccionado = select.value;
            const producto = productos.find(p => p.id == productoSeleccionado);

            if (producto) {
                precioInput.value = producto.precio.toFixed(2);
            } else {
                precioInput.value = '';
            }
        }

        window.onload = function() {
            actualizarPrecio(); // set precio al cargar
        }
    </script>
</head>
<body>
    <h1>Agregar producto al menú del día</h1>
    <form action="/agregar_menu" method="post">
        <label for="producto_id">Producto:</label>
        <select id="producto_id" name="producto_id" onchange="actualizarPrecio()" required>
            {% for p in productos %}
                <option value="{{ p.id }}">{{ p.nombre }} - {{ p.descripcion }}</option>
            {% endfor %}
        </select>
        <br><br>

        <label for="precio">Precio:</label>
        <input type="number" id="precio" name="precio_menu" step="0.01" min="0" required>
        <br><br>

        <label for="fecha">Fecha:</label>
        <input type="date" name="fecha" required>
        <br><br>

        <button type="submit">Agregar</button>
    </form>
    <a href="/panel">Volver al panel</a>
</body>
</html>
